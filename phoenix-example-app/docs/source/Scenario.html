<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js">// Generated by CoffeeScript 1.4.0
<span id='Phoenix-model-Scenario'>/**
</span>* Domain model for a Scenario.
*/

Ext.define(&quot;Phoenix.model.Scenario&quot;, {
  extend: &quot;Ext.data.Model&quot;,
  requires: [&quot;Phoenix.model.ScenarioItem&quot;, &quot;Phoenix.store.ScenarioItemStore&quot;],
<span id='Phoenix-model-Scenario-property-idProperty'>  idProperty: &quot;id&quot;,
</span><span id='Phoenix-model-Scenario-property-fields'>  fields: [
</span>    {
      name: &quot;id&quot;,
      type: &quot;string&quot;
    }, {
      name: &quot;name&quot;,
      type: &quot;string&quot;
    }, {
      name: &quot;description&quot;,
      type: &quot;string&quot;
    }, {
      name: &quot;dateUpdated&quot;,
      type: &quot;date&quot;
    }, {
      name: &quot;probabilityId&quot;,
      type: &quot;int&quot;
    }, {
      name: &quot;planCost&quot;,
      type: &quot;float&quot;
    }, {
      name: &quot;impactCost&quot;,
      type: &quot;float&quot;
    }, {
      name: &quot;impactLength&quot;,
      type: &quot;float&quot;
    }, {
      name: &quot;totalImpact&quot;,
      type: &quot;float&quot;
    }, {
      name: &quot;planEffectiveness&quot;,
      type: &quot;string&quot;
    }
  ],
<span id='Phoenix-model-Scenario-property-hasMany'>  hasMany: {
</span>    model: &quot;Phoenix.model.ScenarioItem&quot;,
    name: &quot;scenarioItems&quot;,
    foreignKey: &quot;scenarioId&quot;,
    storeConfig: {
      type: &quot;scenarioItemStore&quot;
    }
  },
<span id='Phoenix-model-Scenario-method-hasInvalidScenarioItems'>  /**
</span>  	* Returns true if this {Phoenix.model.Scenario} has any invalid associated {Phoenix.model.ScenarioItem} models.
  	* @return {Boolean}
  */

  hasInvalidScenarioItems: function() {
    var result;
    result = false;
    this.scenarioItems().each(function(scenarioItem) {
      if (!scenarioItem.isValid()) {
        result = true;
        return false;
      }
    });
    return result;
  },
<span id='Phoenix-model-Scenario-method-updateScenarioItemsAssociation'>  /**
</span>  	* Updates the set of {Phoenix.model.ScenarioItem} associated with this {Phoenix.model.Scenario}.
  */

  updateScenarioItemsAssociation: function() {
    var scenarioId;
    scenarioId = this.getId();
    return this.scenarioItems().each(function(scenarioItem) {
      return scenarioItem.set(&quot;scenarioId&quot;, scenarioId);
    });
  },
<span id='Phoenix-model-Scenario-method-copy'>  /**
</span>  	* Copies this {Phoenix.model.Scenario} and its set of {Phoenix.model.ScenarioItem}.
  	* @return {Phoenix.model.Scenario} The copied Scenario.
  */

  copy: function() {
    var generator, newScenario;
    generator = new Ext.data.UuidGenerator();
    newScenario = this.callParent(arguments);
    newScenario.setId(generator.generate());
    newScenario.set(&quot;name&quot;, &quot;&quot; + (newScenario.get('name')) + &quot; (Copy)&quot;);
    this.scenarioItems().each(function(scenarioItem) {
      var newItem;
      newItem = scenarioItem.copy();
      newItem.setId(generator.generate());
      newItem.set(&quot;scenarioId&quot;, newScenario.getId());
      newScenario.scenarioItems().add(newItem);
      return true;
    });
    return newScenario;
  },
<span id='Phoenix-model-Scenario-method-simulateServerCostBenefitAnalysis'>  /**
</span>  	* Simulates a process that would normally happen on the server. Creates mock disaster plan analysis values
  	* for this {Phoenix.model.Scenario}.
  */

  simulateServerCostBenefitAnalysis: function() {
    var planEffectivenessOptions;
    this.set(&quot;planCost&quot;, Ext.Number.randomInt(10, 50));
    this.set(&quot;impactCost&quot;, Ext.Number.randomInt(800, 5000));
    this.set(&quot;impactLength&quot;, Ext.Number.randomInt(4, 20));
    this.set(&quot;totalImpact&quot;, Ext.Number.randomInt(6000, 80000));
    planEffectivenessOptions = [&quot;Terrible&quot;, &quot;Poor&quot;, &quot;Marginal&quot;, &quot;Good&quot;, &quot;Great&quot;, &quot;Excellent&quot;];
    return this.set(&quot;planEffectiveness&quot;, planEffectivenessOptions[Ext.Number.randomInt(0, 5)]);
  }
});
</pre>
</body>
</html>
